<ion-header>
  <ion-toolbar>
    <ion-title>Administración de Usuarios</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-segment [(ngModel)]="activeTab">
    <ion-segment-button value="list">Lista de Usuarios</ion-segment-button>
    <ion-segment-button value="add">Agregar Usuario</ion-segment-button>
    <ion-segment-button value="edit">Modificar Usuario</ion-segment-button>
  </ion-segment>

  <!-- Tab 1: Lista de Usuarios -->
  <div *ngIf="activeTab === 'list'">
    <ion-list>
      <ion-item *ngFor="let user of users">
        <ion-label>{{ user.username }} ({{ user.email }})</ion-label>
      </ion-item>
    </ion-list>
  </div>

  <!-- Tab 2: Agregar Usuario -->
  <div *ngIf="activeTab === 'add'">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Agregar Nuevo Usuario</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item>
          <ion-label position="floating">Correo Electrónico</ion-label>
          <ion-input [(ngModel)]="newUser.email" type="email"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Nombre de Usuario</ion-label>
          <ion-input [(ngModel)]="newUser.username" type="text"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Contraseña</ion-label>
          <ion-input [(ngModel)]="newUser.password" type="password"></ion-input>
        </ion-item>

        <ion-button expand="full" (click)="addUser()">Agregar</ion-button>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Tab 3: Modificar Usuario -->
  <div *ngIf="activeTab === 'edit'">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Modificar Usuario</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item>
          <ion-label position="floating">Seleccionar Usuario</ion-label>
          <ion-select [(ngModel)]="selectedUser">
            <ion-select-option *ngFor="let user of users" [value]="user">
              {{ user.username }} ({{ user.email }})
            </ion-select-option>
          </ion-select>
        </ion-item>

        <!-- Verificación para evitar errores cuando selectedUser está vacío -->
        <div *ngIf="selectedUser">
          <ion-item>
            <ion-label position="floating">Nuevo Nombre de Usuario</ion-label>
            <ion-input [(ngModel)]="selectedUser.username" type="text"></ion-input>
          </ion-item>

          <ion-item>
            <ion-label position="floating">Nuevo Email</ion-label>
            <ion-input [(ngModel)]="selectedUser.email" type="email"></ion-input>
          </ion-item>

          <ion-button expand="full" (click)="updateUser()">Guardar Cambios</ion-button>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>